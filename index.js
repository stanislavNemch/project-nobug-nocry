import{a as x,i as d,S as q,N as R,P as H}from"./assets/vendor-DG4juXxD.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}})();const N="https://furniture-store.b.goit.study/api",y={FURNITURES:"/furnitures",CATEGORIES:"/categories",ORDERS:"/orders",FEEDBACKS:"/feedbacks"},v=x.create({baseURL:N,headers:{"Content-Type":"application/json"}});async function m(e=1,t=10,s){try{return(await v.get(y.FURNITURES,{params:{page:e,limit:t,category:s}})).data}catch{return d.error({title:"Помилка",message:"Не вдалося завантажити меблі. Спробуйте пізніше.",position:"topRight",timeout:4e3}),null}}async function F(){try{return(await v.get(y.CATEGORIES)).data}catch{return d.error({title:"Помилка",message:"Не вдалося завантажити категорії. Перевірте підключення до інтернету.",position:"topRight",timeout:4e3}),null}}async function D(e=1,t=10){try{return(await v.get(y.FEEDBACKS,{params:{page:e,limit:t}})).data}catch{return d.error({title:"Помилка",message:"Не вдалося завантажити відгуки. Спробуйте оновити сторінку.",position:"topRight",timeout:4e3}),null}}async function V(){try{return(await v.get(y.FURNITURES,{params:{type:"popular"}})).data}catch{return d.error({title:"Помилка",message:"Не вдалося завантажити популярні товари. Спробуйте пізніше.",position:"topRight",timeout:4e3}),null}}(()=>{const e=document.querySelector(".js-menu-container"),t=document.querySelector(".js-open-menu"),s=t.querySelector("use"),i=e.querySelectorAll(".nav-link, .mobile-order-btn"),r=()=>s.getAttribute("href").split("#")[0],o=()=>{const n=r();e.classList.remove("is-open"),t.setAttribute("aria-expanded",!1),s.setAttribute("href",`${n}#icon-burger`),t.setAttribute("aria-label","Перемикач мобільного меню"),document.body.classList.remove("no-scroll")},c=()=>{const n=r();e.classList.add("is-open"),t.setAttribute("aria-expanded",!0),s.setAttribute("href",`${n}#icon-close`),t.setAttribute("aria-label","Закрити мобільне меню"),document.body.classList.add("no-scroll")},l=()=>{e.classList.contains("is-open")?o():c()};t.addEventListener("click",l),i.forEach(n=>{n.addEventListener("click",()=>{e.classList.contains("is-open")&&o()})}),document.addEventListener("keydown",n=>{n.key==="Escape"&&e.classList.contains("is-open")&&o()}),document.addEventListener("click",n=>{const I=e.classList.contains("is-open"),B=e.contains(n.target),O=t.contains(n.target);I&&!B&&!O&&o()}),window.matchMedia("(min-width: 1440px)").addEventListener("change",n=>{n.matches&&e.classList.contains("is-open")&&o()})})();const E="/project-nobug-nocry/assets/sprite-CTbW2Ani.svg",A=document.querySelector(".product-categories-list"),w=document.querySelector(".pagination"),u=document.querySelector(".btn-loadMore"),T="Всі товари";let a=1,p=1,f=null;function U(){const e=document.querySelector(".product-categories-content");e&&e.classList.add("active-category")}function j(e){e.target.closest(".product-categories-content").classList.add("active-category")}function _(){const e=document.querySelector(".active-category");e&&e.classList.remove("active-category")}function z(e){const t=e.map((s,i)=>`<li class="product-categories-item" data-id="${s._id}">
  <img
    class="product-categories-img"
    srcset="
                  ./img/category-imgs/category-img-${i+1}.webp    1x,
                  ./img/category-imgs/category-img-${i+1}@2x.webp 2x
                "
    src="./img/category-imgs/category-img-${i+1}.webp"
    alt="${s.name}"
  />
  <div class="product-categories-content">
    <p class="product-categories-descr">${s.name}</p>
  </div>
</li>`).join("");A.innerHTML=t}async function W(){try{const e=await F();z([{name:T,_id:"78fa12bc34de56f7890a1b35"},...e]),U()}catch{return[]}}function G(e){const t=e.target.closest(".product-categories-item");if(!t)return;const s=t.textContent.trim(),i=t.dataset.id;a=1,_(),j(e),s===T?(f=null,h(m(1,8))):(f=i,h(m(1,8,i)))}A.addEventListener("click",G);async function h(e=m(a,8,f)){X();const t=document.querySelector(".products-list"),s=document.querySelector(".pagination"),i=window.matchMedia("(max-width: 767px)").matches;(a===1||!i)&&(t.innerHTML="",s&&(s.innerHTML=""));try{const r=await e;S();const o=r.furnitures||r;p=Math.ceil(r.totalItems/8),o&&o.length?(o.forEach(c=>{const l=document.createElement("div");l.className="product-item",l.setAttribute("data-id",c._id),l.innerHTML=`
          <img src="${c.images[0]}" alt="${c.name}" class="img-card" width="100%" height="256px" />
          <p class="text-card">${c.name}</p>
          <div class="colors">
            ${c.color.map(n=>`<span class="color-one" style="background-color:${n};"></span>`).join("")}
          </div>
          <p class="text-card">${c.price} грн</p>
          <button class="btn btn-go-modal">Детальніше</button>
        `,t.appendChild(l)}),i||(K(a),Y()),$()):(t.innerHTML="<p>Товари не знайдені.</p>",M())}catch{S(),t.innerHTML="<p>Помилка завантаження товарів.</p>",M()}}function K(e){w.innerHTML="",w.innerHTML+=`
    <button class="btn-prev scroll">
      <svg class="swiper-button-icon" width="24" height="24">
                <use href="${E}#left-arrow-alt"/>
      </svg>
    </button>
  `;for(let t=e;t<=Math.min(e+2,p);t++)w.innerHTML+=`
      <button class="page-number ${t===e?"focus":""}">${t}</button>
    `;e+2<p&&(w.innerHTML+='<span class="dtp">...</span>',w.innerHTML+=`<button class="page-number last">${p}</button>`),w.innerHTML+=`
    <button class="btn-next scroll">
      <svg class="swiper-button-icon" width="24" height="24">
                <use href="${E}#right-arrow-alt" />
      </svg>
    </button>
  `}function X(){const e=document.querySelector(".loader");e&&e.classList.remove("visuallyhidden")}function S(){const e=document.querySelector(".loader");e&&e.classList.add("visuallyhidden")}function Y(){const e=document.querySelector(".btn-prev"),t=document.querySelector(".btn-next");e&&(a===1?e.classList.add("disabled"):e.classList.remove("disabled")),t&&(a>=p?t.classList.add("disabled"):t.classList.remove("disabled"))}function $(){if(!u)return;window.matchMedia("(max-width: 767px)").matches?a>=p?u.style.display="none":u.style.display="block":u.style.display="none"}function M(){u&&(u.style.display="none")}u&&u.addEventListener("click",async()=>{a<p&&(a++,await h(m(a,8,f)),setTimeout(()=>{const e=document.querySelector(".products-list .product-item:last-child");e&&e.scrollIntoView({behavior:"smooth",block:"start"})},100))});const C=document.getElementById("furniture");C&&C.addEventListener("click",async e=>{if(!window.matchMedia("(max-width: 767px)").matches){if(e.target.closest(".page-number")){const s=e.target.closest(".page-number"),i=parseInt(s.textContent,10);isNaN(i)||(a=i,await h(m(a,8,f)),setTimeout(()=>{document.querySelector(".products-list").scrollIntoView({behavior:"smooth",block:"end"})},300))}e.target.closest(".btn-next")&&a<p&&(a++,await h(m(a,8,f)),setTimeout(()=>{document.querySelector(".products-list").scrollIntoView({behavior:"smooth",block:"end"})},300)),e.target.closest(".btn-prev")&&a>1&&(a--,await h(m(a,8,f)),setTimeout(()=>{document.querySelector(".products-list").scrollIntoView({behavior:"smooth",block:"end"})},300))}});window.addEventListener("resize",()=>{$()});document.addEventListener("DOMContentLoaded",()=>{W(),h()});class Z{constructor(){this.swiperContainer=document.querySelector(".popular-products-swiper"),this.swiperWrapper=document.querySelector(".popular-products-swiper .swiper-wrapper"),this.loader=document.querySelector(".popular-products-loader"),this.swiper=null,this.products=[],this.init()}async init(){await this.loadProducts(),this.products.length>=3&&(this.renderProducts(),this.initSwiper())}async loadProducts(){this.showLoader();try{const t=await V();t&&t.furnitures&&t.furnitures.length>=3?this.products=t.furnitures:this.showError("Недостатньо популярних товарів для відображення")}catch{this.showError("Помилка завантаження популярних товарів")}finally{this.hideLoader()}}renderProducts(){const t=this.products.map(s=>`
      <div class="swiper-slide">
        <div class="popular-products-item" data-id="${s._id}">
          <img src="${s.images[0]}" alt="${s.name}" class="img-card" />
          <p class="text-card">${s.name}</p>
          <div class="colors">
            ${s.color.map(i=>`<span class="color-one" style="background-color:${i};"></span>`).join("")}
          </div>
          <p class="text-card">${s.price} грн</p>
          <button class="btn btn-go-modal">Детальніше</button>
        </div>
      </div>
    `).join("");this.swiperWrapper.innerHTML=t}initSwiper(){this.swiper=new q(".popular-products-swiper",{modules:[R,H],slidesPerView:1,spaceBetween:16,centeredSlides:!0,breakpoints:{768:{slidesPerView:2,spaceBetween:24,centeredSlides:!1},1440:{slidesPerView:4,spaceBetween:24,centeredSlides:!1}},navigation:{nextEl:".popular-products-navigation .swiper-button-next",prevEl:".popular-products-navigation .swiper-button-prev"},pagination:{el:".popular-products-pagination",clickable:!0,type:"bullets",renderBullet:function(t,s){return'<span class="'+s+'"></span>'}},loop:!1,watchOverflow:!0,watchSlidesProgress:!0,speed:300,autoplay:!1,touchRatio:1,touchAngle:45,grabCursor:!0,updateOnWindowResize:!0,on:{init:()=>{console.log("Swiper initialized"),this.addCustomIcons()},slideChange:()=>{console.log("Slide changed")}}}),this.bindEvents()}bindEvents(){this.swiperWrapper.addEventListener("click",t=>{const s=t.target.closest(".popular-products-item");if(s&&t.target.classList.contains("btn-go-modal")){const i=s.dataset.id;this.openProductModal(i)}}),window.addEventListener("resize",()=>{setTimeout(()=>{this.swiper&&this.swiper.update()},100)})}addCustomIcons(){setTimeout(()=>{const t=document.querySelector(".popular-products-navigation .swiper-button-prev"),s=document.querySelector(".popular-products-navigation .swiper-button-next");t&&!t.querySelector(".popular-products-icon")&&(t.innerHTML=`
          <svg class="popular-products-icon" width="24" height="24">
            <use href="./img/sprite.svg#left-arrow-alt"></use>
          </svg>
        `),s&&!s.querySelector(".popular-products-icon")&&(s.innerHTML=`
          <svg class="popular-products-icon" width="24" height="24">
            <use href="./img/sprite.svg#right-arrow-alt"></use>
          </svg>
        `)},100)}openProductModal(t){const s=new CustomEvent("openProductModal",{detail:{productId:t}});document.dispatchEvent(s),console.log("Открыть модальное окно для товара:",t)}showLoader(){this.loader.classList.remove("hidden")}hideLoader(){this.loader.classList.add("hidden")}showError(t){this.swiperWrapper.innerHTML=`
      <div class="swiper-slide">
        <p class="error-message" style="text-align: center; padding: 40px; color: #666;">${t}</p>
      </div>
    `}slideNext(){this.swiper&&this.swiper.slideNext()}slidePrev(){this.swiper&&this.swiper.slidePrev()}destroy(){this.swiper&&(this.swiper.destroy(!0,!0),this.swiper=null)}}document.addEventListener("DOMContentLoaded",()=>{new Z});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".faq-question").forEach(e=>{e.addEventListener("click",()=>{const t=e.nextElementSibling,s=e.querySelector("use");if(t.classList.contains("open")){if(t.classList.remove("open"),s){const r=s.getAttribute("href");if(r){const o=r.split("#")[0];s.setAttribute("href",`${o}#chevron-down`)}}}else if(document.querySelectorAll(".faq-question").forEach(r=>{if(r!==e){const o=r.nextElementSibling,c=r.querySelector("use");if(o.classList.contains("open")&&(o.classList.remove("open"),c)){const l=c.getAttribute("href");if(l){const n=l.split("#")[0];c.setAttribute("href",`${n}#chevron-down`)}}}}),t.classList.add("open"),s){const r=s.getAttribute("href");if(r){const o=r.split("#")[0];s.setAttribute("href",`${o}#chevron-up`)}}})})});document.addEventListener("DOMContentLoaded",async()=>{try{const e=await D(1,10);if(!e||!Array.isArray(e.feedbacks)||e.feedbacks.length===0){console.log("Відгуки відсутні або дані некоректні.");return}J(e.feedbacks),Q()}catch(e){console.error("Помилка завантаження відгуків:",e)}});function J(e){const t=document.querySelector(".swiper-wrapper");if(!t){console.error("Контейнер .swiper-wrapper не знайдено.");return}t.innerHTML=e.map(s=>`
        <div class="swiper-slide">
            <div class="review-card">
                <p class="review-text">"${s.descr}"</p>
                <h3>${s.name}</h3>
            </div>
        </div>
    `).join("")}function Q(){const e=new q(".swiper",{slidesPerView:1,spaceBetween:20,loop:!1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0},breakpoints:{768:{slidesPerView:2,spaceBetween:20},1440:{slidesPerView:3,spaceBetween:20}}}),t=document.querySelector(".swiper-button-prev"),s=document.querySelector(".swiper-button-next");t&&t.classList.toggle("swiper-button-disabled",e.isBeginning),s&&s.classList.toggle("swiper-button-disabled",e.isEnd),e.on("slideChange",function(){t&&t.classList.toggle("swiper-button-disabled",this.isBeginning),s&&s.classList.toggle("swiper-button-disabled",this.isEnd)})}const ee=/^\w+(\.\w+)?@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/,te=/^[0-9]{12}$/;let se=null,re=null,g=null,b=null,k=null;function oe(){g=document.getElementById("order-backdrop"),b=document.querySelector(".order-form"),k=document.querySelector(".order-modal .close-btn")}const L=()=>{g&&(g.classList.add("visuallyhidden"),document.body.style.overflow=""),b&&b.reset()},ie=e=>{(e.target===g||e.target===k)&&L()},ne=e=>{e.key==="Escape"&&g&&!g.classList.contains("visuallyhidden")&&L()};async function ae(e){var i,r;e.preventDefault();const t=new FormData(b),s=Object.fromEntries(t);if(s.modelId=se,s.color=re,!ee.test(s.email)){d.error({title:"Validation Error",message:"Please enter a valid E-mail address.",position:"topRight"});return}if(!te.test(s.phone)){d.error({title:"Validation Error",message:"Please enter a valid 12-digit phone number (e.g., 380961234568).",position:"topRight"});return}if(!s.modelId||!s.color){d.error({title:"Error",message:"Could not get furniture details. Please try again.",position:"topRight"});return}try{const o=await x.post("https://furniture-store.b.goit.study/api/orders",s);d.success({title:"Success!",message:"Your order has been successfully placed.",position:"topRight"}),L()}catch(o){d.error({title:"Error",message:((r=(i=o.response)==null?void 0:i.data)==null?void 0:r.message)||"Failed to send order. Please try again later.",position:"topRight"})}}function P(){oe(),b&&b.addEventListener("submit",ae),g&&g.addEventListener("click",ie),document.addEventListener("keydown",ne)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",P):P();
//# sourceMappingURL=index.js.map
