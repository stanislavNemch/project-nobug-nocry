import{a as S,i as u,S as T}from"./assets/vendor-Bl63KDk-.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}})();const I="https://furniture-store.b.goit.study/api",y={FURNITURES:"/furnitures",CATEGORIES:"/categories",ORDERS:"/orders",FEEDBACKS:"/feedbacks"},v=S.create({baseURL:I,headers:{"Content-Type":"application/json"}});async function f(e=1,t=10,s){try{return(await v.get(y.FURNITURES,{params:{page:e,limit:t,category:s}})).data}catch{return u.error({title:"Помилка",message:"Не вдалося завантажити меблі. Спробуйте пізніше.",position:"topRight",timeout:4e3}),null}}async function O(){try{return(await v.get(y.CATEGORIES)).data}catch{return u.error({title:"Помилка",message:"Не вдалося завантажити категорії. Перевірте підключення до інтернету.",position:"topRight",timeout:4e3}),null}}async function B(e=1,t=10){try{return(await v.get(y.FEEDBACKS,{params:{page:e,limit:t}})).data}catch{return u.error({title:"Помилка",message:"Не вдалося завантажити відгуки. Спробуйте оновити сторінку.",position:"topRight",timeout:4e3}),null}}(()=>{const e=document.querySelector(".js-menu-container"),t=document.querySelector(".js-open-menu"),s=t.querySelector("use"),r=e.querySelectorAll(".nav-link, .mobile-order-btn"),o=()=>s.getAttribute("href").split("#")[0],n=()=>{const i=o();e.classList.remove("is-open"),t.setAttribute("aria-expanded",!1),s.setAttribute("href",`${i}#icon-burger`),t.setAttribute("aria-label","Перемикач мобільного меню"),document.body.classList.remove("no-scroll")},a=()=>{const i=o();e.classList.add("is-open"),t.setAttribute("aria-expanded",!0),s.setAttribute("href",`${i}#icon-close`),t.setAttribute("aria-label","Закрити мобільне меню"),document.body.classList.add("no-scroll")},l=()=>{e.classList.contains("is-open")?n():a()};t.addEventListener("click",l),r.forEach(i=>{i.addEventListener("click",()=>{e.classList.contains("is-open")&&n()})}),document.addEventListener("keydown",i=>{i.key==="Escape"&&e.classList.contains("is-open")&&n()}),document.addEventListener("click",i=>{const x=e.classList.contains("is-open"),q=e.contains(i.target),k=t.contains(i.target);x&&!q&&!k&&n()}),window.matchMedia("(min-width: 1440px)").addEventListener("change",i=>{i.matches&&e.classList.contains("is-open")&&n()})})();const M=document.querySelector(".product-categories-list"),g=document.querySelector(".pagination"),A="Всі товари";let c=1,d=1;const h=document.querySelector(".btn-loadMore");function $(){const e=document.querySelector(".product-categories-content");e&&e.classList.add("active-category")}function P(e){e.target.closest(".product-categories-content").classList.add("active-category")}function H(){document.querySelector(".active-category").classList.remove("active-category")}function R(e){const t=e.map((s,r)=>`<li class="product-categories-item" data-id="${s._id}">
  <img
    class="product-categories-img"
    srcset="
                  ./img/category-imgs/category-img-${r+1}.webp    1x,
                  ./img/category-imgs/category-img-${r+1}@2x.webp 2x
                "
    src="./img/category-imgs/category-img-${r+1}.webp"
  />
  <div class="product-categories-content">
    <p class="product-categories-descr">${s.name}</p>
  </div>
</li>`).join("");M.innerHTML=t}async function F(){try{const e=await O();R([{name:A,_id:"78fa12bc34de56f7890a1b35"},...e]),$()}catch(e){return console.log(e),[]}}function D(e){const t=e.target.closest(".product-categories-item");if(!t)return;const s=t.textContent.trim(),r=t.dataset.id;c=1,H(),P(e),s===A&&m(),m(f(1,8,r))}M.addEventListener("click",D);async function m(e=f(c,8)){N();const t=document.querySelector(".products-list"),s=document.querySelector(".pagination");s.innerHTML="";const r=window.matchMedia("(max-width: 374px)").matches;console.debug("createProductsList: isMobile=",r,"innerWidth=",window.innerWidth),r||(t.innerHTML="",s&&(s.innerHTML=""));try{const o=await e;V();const n=o.furnitures||o;d=Math.ceil(o.totalItems/8),n&&n.length?(n.forEach(a=>{const l=document.createElement("div");l.className="product-item",l.setAttribute("data-id",a._id),l.innerHTML=`
          <img src="${a.images[0]}" alt="${a.name}" class="img-card" width="100%" height="256px" />
          <p class="text-card">${a.name}</p>
          <div class="colors">
            ${a.color.map(i=>`<span class="color-one" style="background-color:${i};"></span>`).join("")}
          </div>
          <p class="text-card">${a.price} грн</p>
          <button class="btn btn-go-modal">Детальніше</button>
        `,t.appendChild(l),w(d)}),w(c),_(),U()):console.warn("Товари не знайдені.")}catch(o){console.error("Помилка завантаження товарів:",o),t.innerHTML="<p>Помилка завантаження товарів.</p>"}}function w(e){g.innerHTML="",g.innerHTML+=`
    <button class="btn-prev scroll">
      <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" class="icon">
        <path d="m313-440 224 224-57 56-320-320 320-320 57 56-224 224h487v80H313Z" />
      </svg>
    </button>
  `;for(let t=e;t<=Math.min(e+2,d);t++)g.innerHTML+=`
      <button class="page-number ${t===e?"focus":""}">${t}</button>
    `;e+2<d&&(g.innerHTML+='<span class="dtp">...</span>',g.innerHTML+=`<button class="page-number last">${d}</button>`),g.innerHTML+=`
    <button class="btn-next scroll">
      <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" class="icon">
        <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z" />
      </svg>
    </button>
  `}function N(){document.querySelector(".loader").classList.remove("visuallyhidden")}function V(){document.querySelector(".loader").classList.add("visuallyhidden")}function _(){const e=document.querySelector(".btn-prev"),t=document.querySelector(".btn-next");c===1?e.classList.add("disabled"):e.classList.remove("disabled"),c>=d?t.classList.add("disabled"):t.classList.remove("disabled")}function U(){c>=d?h.style.display="none":h.style.display="inline"}h.addEventListener("click",async()=>{c<d&&(c++,await m(f(c,8)),setTimeout(()=>{const e=document.querySelector(".products-list .product-item:last-child");e&&e.scrollIntoView({behavior:"smooth",block:"start"})},100))});document.addEventListener("click",async e=>{if(e.target.closest(".page-number")){const t=e.target.closest(".page-number"),s=parseInt(t.textContent,10);isNaN(s)||(c=s,await m(f(c,8)),setTimeout(()=>{document.querySelector(".products-list").scrollIntoView({behavior:"smooth",block:"end"})},300))}e.target.closest(".btn-next")&&c<d&&(c++,await m(f(c,8)),setTimeout(()=>{document.querySelector(".products-list").scrollIntoView({behavior:"smooth",block:"end"})},300)),e.target.closest(".btn-prev")&&c>1&&(c--,await m(f(c,8)),setTimeout(()=>{document.querySelector(".products-list").scrollIntoView({behavior:"smooth",block:"end"})},300))});document.addEventListener("DOMContentLoaded",()=>{F(),m()});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".faq-question").forEach(e=>{e.addEventListener("click",()=>{const t=e.nextElementSibling,s=e.querySelector("use");if(t.classList.contains("open")){if(t.classList.remove("open"),s){const o=s.getAttribute("href");if(o){const n=o.split("#")[0];s.setAttribute("href",`${n}#chevron-down`)}}}else if(document.querySelectorAll(".faq-question").forEach(o=>{if(o!==e){const n=o.nextElementSibling,a=o.querySelector("use");if(n.classList.contains("open")&&(n.classList.remove("open"),a)){const l=a.getAttribute("href");if(l){const i=l.split("#")[0];a.setAttribute("href",`${i}#chevron-down`)}}}}),t.classList.add("open"),s){const o=s.getAttribute("href");if(o){const n=o.split("#")[0];s.setAttribute("href",`${n}#chevron-up`)}}})})});document.addEventListener("DOMContentLoaded",async()=>{try{const e=await B(1,10);if(!e||!Array.isArray(e.feedbacks)||e.feedbacks.length===0){console.log("Відгуки відсутні або дані некоректні.");return}j(e.feedbacks),z()}catch(e){console.error("Помилка завантаження відгуків:",e)}});function j(e){const t=document.querySelector(".swiper-wrapper");if(!t){console.error("Контейнер .swiper-wrapper не знайдено.");return}t.innerHTML=e.map(s=>`
        <div class="swiper-slide">
            <div class="review-card">
                <p class="review-text">"${s.descr}"</p>
                <h3>${s.name}</h3>
            </div>
        </div>
    `).join("")}function z(){const e=new T(".swiper",{slidesPerView:1,spaceBetween:20,loop:!1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0},breakpoints:{768:{slidesPerView:2,spaceBetween:20},1440:{slidesPerView:3,spaceBetween:20}}}),t=document.querySelector(".swiper-button-prev"),s=document.querySelector(".swiper-button-next");t&&t.classList.toggle("swiper-button-disabled",e.isBeginning),s&&s.classList.toggle("swiper-button-disabled",e.isEnd),e.on("slideChange",function(){t&&t.classList.toggle("swiper-button-disabled",this.isBeginning),s&&s.classList.toggle("swiper-button-disabled",this.isEnd)})}const G=/^\w+(\.\w+)?@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/,K=/^[0-9]{12}$/;let Z=null,X=null,p=null,b=null,C=null;function W(){p=document.getElementById("order-backdrop"),b=document.querySelector(".order-form"),C=document.querySelector(".order-modal .close-btn")}const L=()=>{p&&(p.classList.add("visuallyhidden"),document.body.style.overflow=""),b&&b.reset()},Y=e=>{(e.target===p||e.target===C)&&L()},J=e=>{e.key==="Escape"&&p&&!p.classList.contains("visuallyhidden")&&L()};async function Q(e){var r,o;e.preventDefault();const t=new FormData(b),s=Object.fromEntries(t);if(s.modelId=Z,s.color=X,!G.test(s.email)){u.error({title:"Validation Error",message:"Please enter a valid E-mail address.",position:"topRight"});return}if(!K.test(s.phone)){u.error({title:"Validation Error",message:"Please enter a valid 12-digit phone number (e.g., 380961234568).",position:"topRight"});return}if(!s.modelId||!s.color){u.error({title:"Error",message:"Could not get furniture details. Please try again.",position:"topRight"});return}try{const n=await S.post("https://furniture-store.b.goit.study/api/orders",s);u.success({title:"Success!",message:"Your order has been successfully placed.",position:"topRight"}),L()}catch(n){u.error({title:"Error",message:((o=(r=n.response)==null?void 0:r.data)==null?void 0:o.message)||"Failed to send order. Please try again later.",position:"topRight"})}}function E(){W(),b&&b.addEventListener("submit",Q),p&&p.addEventListener("click",Y),document.addEventListener("keydown",J)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",E):E();
//# sourceMappingURL=index.js.map
