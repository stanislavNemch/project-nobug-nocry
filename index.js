import{a as v,i as p}from"./assets/vendor-DH9Qgoyn.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}})();const x="https://furniture-store.b.goit.study/api",k={FURNITURES:"/furnitures",CATEGORIES:"/categories",ORDERS:"/orders",FEEDBACKS:"/feedbacks"},A=v.create({baseURL:x,headers:{"Content-Type":"application/json"}});async function f(e=1,t=10){try{return(await A.get(k.FURNITURES,{params:{page:e,limit:t}})).data}catch{return p.error({title:"Помилка",message:"Не вдалося завантажити меблі. Спробуйте пізніше.",position:"topRight",timeout:4e3}),null}}(()=>{const e=document.querySelector(".js-menu-container"),t=document.querySelector(".js-open-menu"),s=t.querySelector("use"),i=e.querySelectorAll(".nav-link, .mobile-order-btn"),o=()=>s.getAttribute("href").split("#")[0],n=()=>{const a=o();e.classList.remove("is-open"),t.setAttribute("aria-expanded",!1),s.setAttribute("href",`${a}#icon-burger`),t.setAttribute("aria-label","Перемикач мобільного меню"),document.body.classList.remove("no-scroll")},c=()=>{const a=o();e.classList.add("is-open"),t.setAttribute("aria-expanded",!0),s.setAttribute("href",`${a}#icon-close`),t.setAttribute("aria-label","Закрити мобільне меню"),document.body.classList.add("no-scroll")},b=()=>{e.classList.contains("is-open")?n():c()};t.addEventListener("click",b),i.forEach(a=>{a.addEventListener("click",()=>{e.classList.contains("is-open")&&n()})}),document.addEventListener("keydown",a=>{a.key==="Escape"&&e.classList.contains("is-open")&&n()}),document.addEventListener("click",a=>{const S=e.classList.contains("is-open"),M=e.contains(a.target),q=t.contains(a.target);S&&!M&&!q&&n()}),window.matchMedia("(min-width: 1440px)").addEventListener("change",a=>{a.matches&&e.classList.contains("is-open")&&n()})})();let r=1,l=1;const u=document.querySelector(".pagination"),h=document.querySelector(".btn-loadMore");async function g(e=f(r,8)){L();const t=document.querySelector(".products-list"),s=document.querySelector(".pagination");window.innerWidth<375&&(t.innerHTML="",s.innerHTML="");try{const i=await e;L();const o=i.furnitures||i;l=Math.ceil(i.totalItems/8),o&&o.length?(o.forEach(n=>{const c=document.createElement("div");c.className="product-item",c.setAttribute("data-id",n._id),c.innerHTML=`
          <img src="${n.images[0]}" alt="${n.name}" class="img-card" width="100%" height="256px" />
          <p class="text-card">${n.name}</p>
          <div class="colors">
            ${n.color.map(b=>`<span class="color-one" style="background-color:${b};"></span>`).join("")}
          </div>
          <p class="text-card">${n.price} грн</p>
          <button class="btn btn-go-modal">Детальніше</button>
        `,t.appendChild(c)}),I(r),T()):t.innerHTML="<p>Товари не знайдені.</p>"}catch(i){console.error("Помилка завантаження товарів:",i),t.innerHTML="<p>Помилка завантаження товарів.</p>"}}function I(e){u.innerHTML="",u.innerHTML+=`
    <button class="btn-prev scroll">
      <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" class="icon">
        <path d="m313-440 224 224-57 56-320-320 320-320 57 56-224 224h487v80H313Z" />
      </svg>
    </button>
  `;for(let t=e;t<=Math.min(e+2,l);t++)u.innerHTML+=`
      <button class="page-number ${t===e?"focus":""}">${t}</button>
    `;e+2<l&&(u.innerHTML+='<span class="dtp">...</span>',u.innerHTML+=`<button class="page-number last">${l}</button>`),u.innerHTML+=`
    <button class="btn-next scroll">
      <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" class="icon">
        <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z" />
      </svg>
    </button>
  `}function L(){document.querySelector(".loader").classList.toggle("visuallyhidden")}function T(){const e=document.querySelector(".btn-prev"),t=document.querySelector(".btn-next");r===1?e.classList.add("disabled"):e.classList.remove("disabled"),r>=l?t.classList.add("disabled"):t.classList.remove("disabled")}function O(){r>=l?h.style.display="none":h.style.display="inline"}document.addEventListener("click",async e=>{if(e.target.closest(".page-number")){const t=e.target.closest(".page-number"),s=parseInt(t.textContent,10);isNaN(s)||(r=s,await g(f(r,8)),setTimeout(()=>{document.querySelector(".products-list").scrollIntoView({behavior:"smooth",block:"nearest"})},300))}e.target.closest(".btn-next")&&r<l&&(r++,await g(f(r,8)),setTimeout(()=>{document.querySelector(".products-list").scrollIntoView({behavior:"smooth",block:"nearest"})},1e3)),e.target.closest(".btn-prev")&&r>1&&(r--,await g(f(r,8)),setTimeout(()=>{document.querySelector(".products-list").scrollIntoView({behavior:"smooth",block:"nearest"})},1e3))});h.addEventListener("click",async()=>{r<l&&(r++,await g(f(r,8)),O(),setTimeout(()=>{document.querySelector(".products-list").scrollIntoView({behavior:"smooth",block:"nearest"})},400))});document.addEventListener("DOMContentLoaded",()=>{g()});document.querySelectorAll(".faq-question").forEach(e=>{e.addEventListener("click",()=>{const t=e.nextElementSibling,s=e.querySelector("use"),i=t.style.display==="block";document.querySelectorAll(".faq-question").forEach(o=>{const n=o.nextElementSibling,c=o.querySelector("use");n.style.display="none",c.setAttribute("href","#down-arrow-alt")}),i||(t.style.display="block",s.setAttribute("href","#up-arrow-alt"))})});const H=/^\w+(\.\w+)?@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/,R=/^[0-9]{12}$/;let B=null,C=null,d=null,m=null,w=null;function P(){d=document.getElementById("order-backdrop"),m=document.querySelector(".order-form"),w=document.querySelector(".order-modal .close-btn")}const y=()=>{d&&(d.classList.add("visuallyhidden"),document.body.style.overflow=""),m&&m.reset()},$=e=>{(e.target===d||e.target===w)&&y()},N=e=>{e.key==="Escape"&&d&&!d.classList.contains("visuallyhidden")&&y()};async function F(e){var i,o;e.preventDefault();const t=new FormData(m),s=Object.fromEntries(t);if(s.modelId=B,s.color=C,!H.test(s.email)){p.error({title:"Validation Error",message:"Please enter a valid E-mail address.",position:"topRight"});return}if(!R.test(s.phone)){p.error({title:"Validation Error",message:"Please enter a valid 12-digit phone number (e.g., 380961234568).",position:"topRight"});return}if(!s.modelId||!s.color){p.error({title:"Error",message:"Could not get furniture details. Please try again.",position:"topRight"});return}try{const n=await v.post("https://furniture-store.b.goit.study/api/orders",s);p.success({title:"Success!",message:"Your order has been successfully placed.",position:"topRight"}),y()}catch(n){p.error({title:"Error",message:((o=(i=n.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to send order. Please try again later.",position:"topRight"})}}function E(){P(),m&&m.addEventListener("submit",F),d&&d.addEventListener("click",$),document.addEventListener("keydown",N)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",E):E();
//# sourceMappingURL=index.js.map
