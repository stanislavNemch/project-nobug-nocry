import{a as S,i as d,R as T,S as I}from"./assets/vendor-GCNr58qD.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();const O="https://furniture-store.b.goit.study/api",b={FURNITURES:"/furnitures",CATEGORIES:"/categories",ORDERS:"/orders",FEEDBACKS:"/feedbacks"},v=S.create({baseURL:O,headers:{"Content-Type":"application/json"}});async function f(e=1,t=10,o){try{return(await v.get(b.FURNITURES,{params:{page:e,limit:t,category:o}})).data}catch{return d.error({title:"Помилка",message:"Не вдалося завантажити меблі. Спробуйте пізніше.",position:"topRight",timeout:4e3}),null}}async function R(){try{return(await v.get(b.CATEGORIES)).data}catch{return d.error({title:"Помилка",message:"Не вдалося завантажити категорії. Перевірте підключення до інтернету.",position:"topRight",timeout:4e3}),null}}async function $(e=1,t=10){try{return(await v.get(b.FEEDBACKS,{params:{page:e,limit:t}})).data}catch{return d.error({title:"Помилка",message:"Не вдалося завантажити відгуки. Спробуйте оновити сторінку.",position:"topRight",timeout:4e3}),null}}(()=>{const e=document.querySelector(".js-menu-container"),t=document.querySelector(".js-open-menu"),o=t.querySelector("use"),r=e.querySelectorAll(".nav-link, .mobile-order-btn"),n=()=>o.getAttribute("href").split("#")[0],s=()=>{const i=n();e.classList.remove("is-open"),t.setAttribute("aria-expanded",!1),o.setAttribute("href",`${i}#icon-burger`),t.setAttribute("aria-label","Перемикач мобільного меню"),document.body.classList.remove("no-scroll")},c=()=>{const i=n();e.classList.add("is-open"),t.setAttribute("aria-expanded",!0),o.setAttribute("href",`${i}#icon-close`),t.setAttribute("aria-label","Закрити мобільне меню"),document.body.classList.add("no-scroll")},m=()=>{e.classList.contains("is-open")?s():c()};t.addEventListener("click",m),r.forEach(i=>{i.addEventListener("click",()=>{e.classList.contains("is-open")&&s()})}),document.addEventListener("keydown",i=>{i.key==="Escape"&&e.classList.contains("is-open")&&s()}),document.addEventListener("click",i=>{const x=e.classList.contains("is-open"),A=e.contains(i.target),k=t.contains(i.target);x&&!A&&!k&&s()}),window.matchMedia("(min-width: 1440px)").addEventListener("change",i=>{i.matches&&e.classList.contains("is-open")&&s()})})();const M=document.querySelector(".product-categories-list"),g=document.querySelector(".pagination"),C="Всі товари";let a=1,l=1;const h=document.querySelector(".btn-loadMore");function B(){const e=document.querySelector(".product-categories-content");e&&e.classList.add("active-category")}function H(e){e.target.closest(".product-categories-content").classList.add("active-category")}function P(){document.querySelector(".active-category").classList.remove("active-category")}function F(e){const t=e.map((o,r)=>`<li class="product-categories-item" data-id="${o._id}">
  <img
    class="product-categories-img"
    srcset="
                  ../img/category-imgs/category-img-${r+1}.webp    1x,
                  ../img/category-imgs/category-img-${r+1}@2x.webp 2x
                "
    src="./img/category-imgs/category-img-${r+1}.webp"
  />
  <div class="product-categories-content">
    <p class="product-categories-descr">${o.name}</p>
  </div>
</li>`).join("");M.innerHTML=t}async function N(){try{const e=await R();F([{name:C,_id:"78fa12bc34de56f7890a1b35"},...e]),B()}catch(e){return console.log(e),[]}}function D(e){const t=e.target.closest(".product-categories-item");if(!t)return;const o=t.textContent.trim(),r=t.dataset.id;P(),H(e),o===C&&p(),p(f(1,8,r))}M.addEventListener("click",D);async function p(e=f(a,8)){_();const t=document.querySelector(".products-list"),o=document.querySelector(".pagination");o.innerHTML="";const r=window.matchMedia("(max-width: 374px)").matches;console.debug("createProductsList: isMobile=",r,"innerWidth=",window.innerWidth),r||(t.innerHTML="",o&&(o.innerHTML=""));try{const n=await e;U();const s=n.furnitures||n;l=Math.ceil(n.totalItems/8),s&&s.length?(s.forEach(c=>{const m=document.createElement("div");m.className="product-item",m.setAttribute("data-id",c._id),m.innerHTML=`
          <img src="${c.images[0]}" alt="${c.name}" class="img-card" width="100%" height="256px" />
          <p class="text-card">${c.name}</p>
          <div class="colors">
            ${c.color.map(i=>`<span class="color-one" style="background-color:${i};"></span>`).join("")}
          </div>
          <p class="text-card">${c.price} грн</p>
          <button class="btn btn-go-modal">Детальніше</button>
        `,t.appendChild(m),w(l)}),w(a),j()):console.warn("Товари не знайдені.")}catch(n){console.error("Помилка завантаження товарів:",n),t.innerHTML="<p>Помилка завантаження товарів.</p>"}}function w(e){g.innerHTML="",g.innerHTML+=`
    <button class="btn-prev scroll">
      <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" class="icon">
        <path d="m313-440 224 224-57 56-320-320 320-320 57 56-224 224h487v80H313Z" />
      </svg>
    </button>
  `;for(let t=e;t<=Math.min(e+2,l);t++)g.innerHTML+=`
      <button class="page-number ${t===e?"focus":""}">${t}</button>
    `;e+2<l&&(g.innerHTML+='<span class="dtp">...</span>',g.innerHTML+=`<button class="page-number last">${l}</button>`),g.innerHTML+=`
    <button class="btn-next scroll">
      <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" class="icon">
        <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z" />
      </svg>
    </button>
  `}function _(){document.querySelector(".loader").classList.remove("visuallyhidden")}function U(){document.querySelector(".loader").classList.add("visuallyhidden")}function j(){const e=document.querySelector(".btn-prev"),t=document.querySelector(".btn-next");a===1?e.classList.add("disabled"):e.classList.remove("disabled"),a>=l?t.classList.add("disabled"):t.classList.remove("disabled")}function V(){a>=l?h.style.display="none":h.style.display="inline"}document.addEventListener("click",async e=>{if(e.target.closest(".page-number")){const t=e.target.closest(".page-number"),o=parseInt(t.textContent,10);isNaN(o)||(a=o,await p(f(a,8)),setTimeout(()=>{document.querySelector(".products-list").scrollIntoView({behavior:"smooth",block:"end"})},300))}e.target.closest(".btn-next")&&a<l&&(a++,await p(f(a,8)),setTimeout(()=>{document.querySelector(".products-list").scrollIntoView({behavior:"smooth",block:"end"})},300)),e.target.closest(".btn-prev")&&a>1&&(a--,await p(f(a,8)),setTimeout(()=>{document.querySelector(".products-list").scrollIntoView({behavior:"smooth",block:"end"})},300)),h.addEventListener("click",async()=>{a<l&&(a++,V(),await p(f(a,8)),setTimeout(()=>{document.querySelector(".products-list").scrollIntoView({behavior:"smooth",block:"nearest"})},100))})});document.addEventListener("DOMContentLoaded",()=>{N(),p()});document.querySelectorAll(".faq-question").forEach(e=>{e.addEventListener("click",()=>{const t=e.nextElementSibling,o=e.querySelector("use"),r=t.style.display==="block";document.querySelectorAll(".faq-question").forEach(n=>{const s=n.nextElementSibling,c=n.querySelector("use");s.style.display="none",c.setAttribute("href","#down-arrow-alt")}),r||(t.style.display="block",o.setAttribute("href","#up-arrow-alt"))})});function z(e){return e>=3.3&&e<=3.7?3.5:e>=3.8&&e<=4.2?4:Math.round(e*2)/2}document.addEventListener("DOMContentLoaded",async()=>{try{const e=await $(1,10);if(!e||!Array.isArray(e.feedbacks))return;console.log("Отримані відгуки з бекенду:",e.feedbacks),G(e.feedbacks),K()}catch(e){console.error("Помилка завантаження відгуків:",e)}});function G(e){const t=document.querySelector(".swiper-wrapper");t&&(t.innerHTML=e.map((o,r)=>`
    <div class="swiper-slide">
      <div class="review-card">
        <div class="rating-stars" id="rating-${r}"></div>
        <p class="review-text">"${o.descr}"</p>
        <h3>${o.name}</h3>
      </div>
    </div>
  `).join(""),e.forEach((o,r)=>{new T(document.getElementById(`rating-${r}`),{readOnly:!0,half:!0,starType:"svg",score:z(o.rate)})}))}function K(){new I(".swiper",{slidesPerView:1,spaceBetween:20,loop:!1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0}})}const Z=/^\w+(\.\w+)?@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/,X=/^[0-9]{12}$/;let W=null,Y=null,u=null,y=null,q=null;function J(){u=document.getElementById("order-backdrop"),y=document.querySelector(".order-form"),q=document.querySelector(".order-modal .close-btn")}const L=()=>{u&&(u.classList.add("visuallyhidden"),document.body.style.overflow=""),y&&y.reset()},Q=e=>{(e.target===u||e.target===q)&&L()},ee=e=>{e.key==="Escape"&&u&&!u.classList.contains("visuallyhidden")&&L()};async function te(e){var r,n;e.preventDefault();const t=new FormData(y),o=Object.fromEntries(t);if(o.modelId=W,o.color=Y,!Z.test(o.email)){d.error({title:"Validation Error",message:"Please enter a valid E-mail address.",position:"topRight"});return}if(!X.test(o.phone)){d.error({title:"Validation Error",message:"Please enter a valid 12-digit phone number (e.g., 380961234568).",position:"topRight"});return}if(!o.modelId||!o.color){d.error({title:"Error",message:"Could not get furniture details. Please try again.",position:"topRight"});return}try{const s=await S.post("https://furniture-store.b.goit.study/api/orders",o);d.success({title:"Success!",message:"Your order has been successfully placed.",position:"topRight"}),L()}catch(s){d.error({title:"Error",message:((n=(r=s.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to send order. Please try again later.",position:"topRight"})}}function E(){J(),y&&y.addEventListener("submit",te),u&&u.addEventListener("click",Q),document.addEventListener("keydown",ee)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",E):E();
//# sourceMappingURL=index.js.map
