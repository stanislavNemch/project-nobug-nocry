import{a as v,i as d}from"./assets/vendor-DH9Qgoyn.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const q="https://furniture-store.b.goit.study/api",E={FURNITURES:"/furnitures",CATEGORIES:"/categories",ORDERS:"/orders",FEEDBACKS:"/feedbacks"},w=v.create({baseURL:q,headers:{"Content-Type":"application/json"}});async function f(e=1,t=10,n){try{return(await w.get(E.FURNITURES,{params:{page:e,limit:t,category:n}})).data}catch{return d.error({title:"Помилка",message:"Не вдалося завантажити меблі. Спробуйте пізніше.",position:"topRight",timeout:4e3}),null}}async function x(){try{return(await w.get(E.CATEGORIES)).data}catch{return d.error({title:"Помилка",message:"Не вдалося завантажити категорії. Перевірте підключення до інтернету.",position:"topRight",timeout:4e3}),null}}(()=>{const e=document.querySelector(".js-menu-container"),t=document.querySelector(".js-open-menu"),n=t.querySelector("use"),r=e.querySelectorAll(".nav-link, .mobile-order-btn"),s=()=>n.getAttribute("href").split("#")[0],o=()=>{const i=s();e.classList.remove("is-open"),t.setAttribute("aria-expanded",!1),n.setAttribute("href",`${i}#icon-burger`),t.setAttribute("aria-label","Перемикач мобільного меню"),document.body.classList.remove("no-scroll")},c=()=>{const i=s();e.classList.add("is-open"),t.setAttribute("aria-expanded",!0),n.setAttribute("href",`${i}#icon-close`),t.setAttribute("aria-label","Закрити мобільне меню"),document.body.classList.add("no-scroll")},y=()=>{e.classList.contains("is-open")?o():c()};t.addEventListener("click",y),r.forEach(i=>{i.addEventListener("click",()=>{e.classList.contains("is-open")&&o()})}),document.addEventListener("keydown",i=>{i.key==="Escape"&&e.classList.contains("is-open")&&o()}),document.addEventListener("click",i=>{const A=e.classList.contains("is-open"),I=e.contains(i.target),T=t.contains(i.target);A&&!I&&!T&&o()}),window.matchMedia("(min-width: 1440px)").addEventListener("change",i=>{i.matches&&e.classList.contains("is-open")&&o()})})();const S=document.querySelector(".product-categories-list"),p=document.querySelector(".pagination"),M="Всі товари";let a=1,u=1;function k(){const e=document.querySelector(".product-categories-content");e&&e.classList.add("active-category")}function O(e){e.target.closest(".product-categories-content").classList.add("active-category")}function R(){document.querySelector(".active-category").classList.remove("active-category")}function H(e){const t=e.map((n,r)=>`<li class="product-categories-item" data-id="${n._id}">
  <img
    class="product-categories-img"
    srcset="
                  ../img/category-imgs/category-img-${r+1}.webp    1x,
                  ../img/category-imgs/category-img-${r+1}@2x.webp 2x
                "
    src="./img/category-imgs/category-img-${r+1}.webp"
  />
  <div class="product-categories-content">
    <p class="product-categories-descr">${n.name}</p>
  </div>
</li>`).join("");S.innerHTML=t}async function $(){try{const e=await x();H([{name:M,_id:"78fa12bc34de56f7890a1b35"},...e]),k()}catch(e){return console.log(e),[]}}function B(e){const t=e.target.closest(".product-categories-item");if(!t)return;const n=t.textContent.trim(),r=t.dataset.id;R(),O(e),n===M&&m(),m(f(1,8,r))}S.addEventListener("click",B);async function m(e=f(a,8)){LoaderHid();const t=document.querySelector(".products-list"),n=document.querySelector(".pagination");window.innerWidth<375&&(t.innerHTML="",n.innerHTML="");try{const r=await e;LoaderHid();const s=r.furnitures||r;u=Math.ceil(r.totalItems/8),s&&s.length?(s.forEach(o=>{const c=document.createElement("div");c.className="product-item",c.setAttribute("data-id",o._id),c.innerHTML=`
          <img src="${o.images[0]}" alt="${o.name}" class="img-card" width="100%" height="256px" />
          <p class="text-card">${o.name}</p>
          <div class="colors">
            ${o.color.map(y=>`<span class="color-one" style="background-color:${y};"></span>`).join("")}
          </div>
          <p class="text-card">${o.price} грн</p>
          <button class="btn btn-go-modal">Детальніше</button>
        `,t.appendChild(c),h(u)}),h(a),P()):t.innerHTML="<p>Товари не знайдені.</p>"}catch(r){console.error("Помилка завантаження товарів:",r),t.innerHTML="<p>Помилка завантаження товарів.</p>"}}function h(e){p.innerHTML="",p.innerHTML+=`
    <button class="btn-prev scroll">
      <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" class="icon">
        <path d="m313-440 224 224-57 56-320-320 320-320 57 56-224 224h487v80H313Z" />
      </svg>
    </button>
  `;for(let t=e;t<=Math.min(e+2,u);t++)p.innerHTML+=`
      <button class="page-number ${t===e?"focus":""}">${t}</button>
    `;e+2<u&&(p.innerHTML+='<span class="dtp">...</span>',p.innerHTML+=`<button class="page-number last">${u}</button>`),p.innerHTML+=`
    <button class="btn-next scroll">
      <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" class="icon">
        <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z" />
      </svg>
    </button>
  `}function P(){const e=document.querySelector(".btn-prev"),t=document.querySelector(".btn-next");a===1?e.classList.add("disabled"):e.classList.remove("disabled"),a>=u?t.classList.add("disabled"):t.classList.remove("disabled")}document.addEventListener("click",async e=>{if(e.target.closest(".page-number")){const t=e.target.closest(".page-number"),n=parseInt(t.textContent,10);isNaN(n)||(a=n,await m(f(a,8)),setTimeout(()=>{document.querySelector(".products-list").scrollIntoView({behavior:"smooth",block:"nearest"})},300))}e.target.closest(".btn-next")&&a<u&&(a++,await m(f(a,8)),setTimeout(()=>{document.querySelector(".products-list").scrollIntoView({behavior:"smooth",block:"nearest"})},1e3)),e.target.closest(".btn-prev")&&a>1&&(a--,await m(f(a,8)),setTimeout(()=>{document.querySelector(".products-list").scrollIntoView({behavior:"smooth",block:"nearest"})},1e3)),document.getElementById("furniture").scrollIntoView({behavior:"smooth",block:"center"})});document.addEventListener("DOMContentLoaded",()=>{$(),m()});document.querySelectorAll(".faq-question").forEach(e=>{e.addEventListener("click",()=>{const t=e.nextElementSibling,n=e.querySelector("use"),r=t.style.display==="block";document.querySelectorAll(".faq-question").forEach(s=>{const o=s.nextElementSibling,c=s.querySelector("use");o.style.display="none",c.setAttribute("href","#down-arrow-alt")}),r||(t.style.display="block",n.setAttribute("href","#up-arrow-alt"))})});const N=/^\w+(\.\w+)?@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/,F=/^[0-9]{12}$/;let _=null,D=null,l=null,g=null,C=null;function U(){l=document.getElementById("order-backdrop"),g=document.querySelector(".order-form"),C=document.querySelector(".order-modal .close-btn")}const b=()=>{l&&(l.classList.add("visuallyhidden"),document.body.style.overflow=""),g&&g.reset()},j=e=>{(e.target===l||e.target===C)&&b()},V=e=>{e.key==="Escape"&&l&&!l.classList.contains("visuallyhidden")&&b()};async function z(e){var r,s;e.preventDefault();const t=new FormData(g),n=Object.fromEntries(t);if(n.modelId=_,n.color=D,!N.test(n.email)){d.error({title:"Validation Error",message:"Please enter a valid E-mail address.",position:"topRight"});return}if(!F.test(n.phone)){d.error({title:"Validation Error",message:"Please enter a valid 12-digit phone number (e.g., 380961234568).",position:"topRight"});return}if(!n.modelId||!n.color){d.error({title:"Error",message:"Could not get furniture details. Please try again.",position:"topRight"});return}try{const o=await v.post("https://furniture-store.b.goit.study/api/orders",n);d.success({title:"Success!",message:"Your order has been successfully placed.",position:"topRight"}),b()}catch(o){d.error({title:"Error",message:((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to send order. Please try again later.",position:"topRight"})}}function L(){U(),g&&g.addEventListener("submit",z),l&&l.addEventListener("click",j),document.addEventListener("keydown",V)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",L):L();
//# sourceMappingURL=index.js.map
